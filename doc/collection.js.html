<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: collection.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: collection.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>angular.module('dougal').factory('Collection', CollectionFactory);

CollectionFactory.$inject = ['$q'];
function CollectionFactory($q) {

  /**
   * Overrides native JS arrays with Dougal specific functions
   *
   * @example
   * var cars = new Collection({Model: Car});
   * cars.push(someCar);
   * cars[0]; // someCar
   *
   * @param options {Object}
   * * `model`
   * * `data` (optional)
   * @constructor
   * @memberof module:dougal
   * @since 0.3.0
   */
  function Collection(options) {
    Array.call(this);

    this.Model = options.model;

    if (options.data) {
      this.parse(options.data);
    }
  }

  Collection.prototype = _.create(Array.prototype, {

    /**
     * @instance
     * @memberof module:dougal.Collection
     * @since 0.3.0
     */
    clear: function () {
      this.length = 0;
    },

    /**
     * Parses and adds the returned values. Can be overridden by a property of {@link module:dougal.Model.extend|Model.extend()}:
     * ```javascript
     * parseList: function (response) {
     *   return response.data;
     * }
     * ```
     *
     * @instance
     * @param data {Array}
     * @memberof module:dougal.Collection
     * @see module:dougal.HttpStore#list
     * @since 0.3.0
     */
    parse: function (data) {
      var parseList = $q.when(this.Model.prototype.$$options.parseList ?
        this.Model.prototype.$$options.parseList(data) : data);
      parseList.then(_.bind(function (data) {
        this.clear();
        _.each(data, _.bind(function (values) {
          this.push(new this.Model(values));
        }, this));
      }, this));
    },

    /**
     * @instance
     * @memberof module:dougal.Collection
     * @since 0.3.0
     */
    toJson: function () {
      return _.map(this, function (model) {
        return model.$toJson();
      });
    }
  });

  return Collection;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-dougal.html">dougal</a></li></ul><h3>Classes</h3><ul><li><a href="module-dougal.Collection.html">Collection</a></li><li><a href="module-dougal.HttpStore.html">HttpStore</a></li><li><a href="module-dougal.Model.html">Model</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Thu Jun 23 2016 10:57:32 GMT+0100 (IST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
